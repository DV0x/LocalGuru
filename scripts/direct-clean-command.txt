# Direct PostgreSQL command to clean the database
# You can copy and paste this command into your terminal

PGPASSWORD="ch@924880194792" psql -h aws-0-ap-southeast-1.pooler.supabase.com -p 5432 -d postgres -U postgres.ghjbtvyalvigvmuodaas -c "
-- Start a transaction
BEGIN;

-- Disable triggers temporarily
SET session_replication_role = 'replica';

-- Truncate tables in proper order
TRUNCATE TABLE util.embedding_queue CASCADE;
TRUNCATE TABLE public.embedding_metrics CASCADE;
TRUNCATE TABLE public.embedding_metrics_summary CASCADE;
TRUNCATE TABLE public.search_feedback CASCADE;
TRUNCATE TABLE public.embedding_cache CASCADE;
TRUNCATE TABLE public.content_representations CASCADE;
TRUNCATE TABLE public.content_chunks CASCADE;
TRUNCATE TABLE public.reddit_comments CASCADE;
TRUNCATE TABLE public.reddit_posts CASCADE;
TRUNCATE TABLE public.reddit_users CASCADE;

-- Re-enable triggers
SET session_replication_role = 'origin';

-- Commit the transaction
COMMIT;
" 